ĞĞ¢Ğ§Ğ•Ğ¢ Ğ ĞŸĞ ĞĞ•ĞšĞ¢Ğ• DJANGO
==================================================

Ğ¡Ğ¢Ğ Ğ£ĞšĞ¢Ğ£Ğ Ğ ĞŸĞ ĞĞ•ĞšĞ¢Ğ:

accounts/
  ğŸ“„ admin.py
  ğŸ“„ apps.py
  ğŸ“„ models.py
  ğŸ“„ signals.py
  ğŸ“„ tests.py
  ğŸ“„ urls.py
  ğŸ“„ views.py
  ğŸ“„ __init__.py

accounts\migrations/
  ğŸ“„ 0001_initial.py
  ğŸ“„ __init__.py

accounts\templates/

accounts\templates\accounts/
  ğŸ“„ profile.html

accounts\templates\registration/
  ğŸ“„ activation_invalid.html
  ğŸ“„ login.html
  ğŸ“„ register.html

backup_commands/
  ğŸ“„ check_catalog_data.py
  ğŸ“„ check_catalog_final.py
  ğŸ“„ check_catalog_fixed.py
  ğŸ“„ check_catalog_simple.py
  ğŸ“„ check_templates.py
  ğŸ“„ check_urls_fix.py
  ğŸ“„ check_urls_views.py
  ğŸ“„ check_views.py
  ğŸ“„ sync_categories.py
  ğŸ“„ sync_products.py
  ğŸ“„ sync_products_fixed.py
  ğŸ“„ sync_product_images.py

cart/
  ğŸ“„ admin.py
  ğŸ“„ apps.py
  ğŸ“„ context_processors.py
  ğŸ“„ models.py
  ğŸ“„ tests.py
  ğŸ“„ urls.py
  ğŸ“„ views.py
  ğŸ“„ __init__.py

cart\migrations/
  ğŸ“„ __init__.py

cart\templates/

cart\templates\cart/
  ğŸ“„ cart_detail.html

catalog/
  ğŸ“„ admin.py
  ğŸ“„ api.py
  ğŸ“„ apps.py
  ğŸ“„ context_processors.py
  ğŸ“„ create_categories.py
  ğŸ“„ forms.py
  ğŸ“„ models.py
  ğŸ“„ ocs_client.py
  ğŸ“„ tests.py
  ğŸ“„ urls.py
  ğŸ“„ utils.py
  ğŸ“„ views.py
  ğŸ“„ __init__.py

catalog\management/

catalog\management\commands/
  ğŸ“„ add_placeholder_images.py
  ğŸ“„ analyze_categories.py
  ğŸ“„ analyze_database.py
  ğŸ“„ analyze_duplicates.py
  ğŸ“„ analyze_models.py
  ğŸ“„ analyze_ocs_docs.py
  ğŸ“„ analyze_prices.py
  ğŸ“„ analyze_production.py
  ğŸ“„ analyze_project.py
  ğŸ“„ api_status.py
  ğŸ“„ assign_categories.py
  ğŸ“„ assign_ocs_products.py
  ğŸ“„ assign_products_to_categories.py
  ğŸ“„ build_category_tree.py
  ğŸ“„ build_ocs_category_tree.py
  ğŸ“„ check_all_pages.py
  ğŸ“„ check_catalog_template.py
  ğŸ“„ check_dependencies.py
  ğŸ“„ check_final_indexes.py
  ğŸ“„ check_fix.py
  ğŸ“„ check_model_structure.py
  ğŸ“„ check_ocs_methods.py
  ğŸ“„ check_ocs_settings.py
  ğŸ“„ check_product_import.py
  ğŸ“„ check_refactor.py
  ğŸ“„ check_templates_quick.py
  ğŸ“„ create_backup_snapshot.py
  ğŸ“„ create_brand_categories.py
  ğŸ“„ create_categories.py
  ğŸ“„ create_category_mappings.py
  ğŸ“„ create_db_indexes.py
  ğŸ“„ create_limited_categories.py
  ğŸ“„ create_minimal_working.py
  ğŸ“„ create_optimization_migrations.py
  ğŸ“„ create_production_settings.py
  ğŸ“„ create_products_from_partner.py
  ğŸ“„ create_project_report.py
  ğŸ“„ create_simple_api.py
  ğŸ“„ create_simple_products.py
  ğŸ“„ create_test_page.py
  ğŸ“„ create_working_home.py
  ğŸ“„ create_working_test.py
  ğŸ“„ daily_update.py
  ğŸ“„ debug_400_error.py
  ğŸ“„ debug_price_import.py
  ğŸ“„ debug_real_site.py
  ğŸ“„ debug_site_products.py
  ğŸ“„ debug_sync_products.py
  ğŸ“„ debug_templates.py
  ğŸ“„ diagnose_categories.py
  ğŸ“„ diagnose_ocs_products.py
  ğŸ“„ diagnose_routing.py
  ğŸ“„ extract_brands_from_names.py
  ğŸ“„ fetch_categories.py
  ğŸ“„ fetch_cities.py
  ğŸ“„ fetch_content.py
  ğŸ“„ fetch_products.py
  ğŸ“„ finalize_category_assignments.py
  ğŸ“„ final_fix_structure.py
  ğŸ“„ final_project_check.py
  ğŸ“„ find_price_endpoints.py
  ğŸ“„ find_relation.py
  ğŸ“„ find_technika_link.py
  ğŸ“„ fixed_cleanup.py
  ğŸ“„ fix_400_error.py
  ğŸ“„ fix_all_header_urls.py
  ğŸ“„ fix_catalog_issues.py
  ğŸ“„ fix_catalog_view.py
  ğŸ“„ fix_categories.py
  ğŸ“„ fix_category_assignments.py
  ğŸ“„ fix_category_assignment_v2.py
  ğŸ“„ fix_category_assignment_v3.py
  ğŸ“„ fix_category_slugs.py
  ğŸ“„ fix_context_issue.py
  ğŸ“„ fix_header_urls.py
  ğŸ“„ fix_indexes.py
  ğŸ“„ fix_main_views.py
  ğŸ“„ fix_ocs_settings.py
  ğŸ“„ fix_prices.py
  ğŸ“„ fix_products_final.py
  ğŸ“„ fix_remaining_categories.py
  ğŸ“„ fix_routing.py
  ğŸ“„ fix_site_display.py
  ğŸ“„ fix_site_display_correct.py
  ğŸ“„ fix_slugs.py
  ğŸ“„ fix_slugs_only.py
  ğŸ“„ fix_technika_link.py
  ğŸ“„ fix_views_auto.py
  ğŸ“„ force_fix_slugs.py
  ğŸ“„ force_sync_products.py
  ğŸ“„ import_ocs_prices.py
  ğŸ“„ move_products_to_subcategories.py
  ğŸ“„ open_site.py
  ğŸ“„ production_report.py
  ğŸ“„ quick_production_fix.py
  ğŸ“„ rebuild_categories_properly.py
  ğŸ“„ restore_from_backup.py
  ğŸ“„ restore_old_structure.py
  ğŸ“„ safe_cleanup.py
  ğŸ“„ safe_update_categories.py
  ğŸ“„ setup_safe_development.py
  ğŸ“„ show_uncategorized_products.py
  ğŸ“„ sync_all_appliances.py
  ğŸ“„ sync_all_appliances_no_price_filter.py
  ğŸ“„ sync_extended_appliances.py
  ğŸ“„ sync_filtered_products.py
  ğŸ“„ sync_home_appliances.py
  ğŸ“„ sync_household_fixed.py
  ğŸ“„ sync_ocs_by_category.py
  ğŸ“„ sync_ocs_categories.py
  ğŸ“„ sync_ocs_products.py
  ğŸ“„ sync_products.py
  ğŸ“„ sync_real_ocs_products.py
  ğŸ“„ sync_smart.py
  ğŸ“„ sync_test_fixed.py
  ğŸ“„ sync_test_household.py
  ğŸ“„ sync_with_placeholders.py
  ğŸ“„ test_appliance_filter.py
  ğŸ“„ test_minimal_site.py
  ğŸ“„ test_ocs_api.py
  ğŸ“„ test_ocs_connection.py
  ğŸ“„ test_ocs_endpoints.py
  ğŸ“„ test_ocs_prices.py
  ğŸ“„ test_ocs_products.py
  ğŸ“„ universal_check.py
  ğŸ“„ universal_sync.py
  ğŸ“„ update_category_structure.py

catalog\migrations/
  ğŸ“„ 0001_initial.py
  ğŸ“„ 0002_alter_category_options_alter_partnerproduct_options_and_more.py
  ğŸ“„ 0003_category_image_product.py
  ğŸ“„ 0004_category_category_type.py
  ğŸ“„ 0005_categorymapping.py
  ğŸ“„ 0006_partnerproduct_external_id.py
  ğŸ“„ 0007_partnerproduct_is_active.py
  ğŸ“„ __init__.py

catalog\services/
  ğŸ“„ ocs_api_service.py
  ğŸ“„ ocs_sync_service.py
  ğŸ“„ __init__.py

catalog\templates/

catalog\templates\catalog/
  ğŸ“„ catalog.html
  ğŸ“„ category.html
  ğŸ“„ list.html
  ğŸ“„ product_detail.html
  ğŸ“„ test_products.html

core/
  ğŸ“„ asgi.py
  ğŸ“„ settings.py
  ğŸ“„ urls.py
  ğŸ“„ views.py
  ğŸ“„ wsgi.py
  ğŸ“„ __init__.py

logs/

main/
  ğŸ“„ admin.py
  ğŸ“„ apps.py
  ğŸ“„ base.html
  ğŸ“„ home.html
  ğŸ“„ models.py
  ğŸ“„ tests.py
  ğŸ“„ urls.py
  ğŸ“„ views.py
  ğŸ“„ __init__.py

main\migrations/
  ğŸ“„ __init__.py

media/

media\categories/

media\products/

media\products\1000416315/

media\products\1000417004/

media\products\1000551103/

media\products\1000556228/

media\products\1000558633/

media\products\1000558635/

media\products\1000558797/

media\products\1000560481/

media\products\1000560508/

media\products\1000560519/

media\products\1000561405/

media\products\1000561406/

media\products\1000562330/

media\products\1000562608/

media\products\1000563275/

media\products\1000563277/

media\products\1000563279/

media\products\1000563280/

media\products\1000563281/

media\products\1000563282/

media\products\1000563283/

media\products\1000563285/

media\products\1000563467/

media\products\1000564446/

media\products\1000567859/

media\products\1000567860/

media\products\1000571118/

media\products\1000571958/

media\products\1000572016/

media\products\1000572019/

media\products\1000572556/

media\products\1000572557/

media\products\1000572951/

media\products\1000574896/

media\products\1000574954/

media\products\1000574955/

media\products\1000574956/

media\products\1000575418/

media\products\1000575421/

media\products\1000576093/

media\products\1000576094/

media\products\1000576096/

media\products\1000576245/

media\products\1000576246/

media\products\1000576251/

media\products\1000576253/

media\products\1000576255/

media\products\1000576258/

media\products\1000576272/

media\products\1000576377/

media\products\1000576378/

media\products\1000576379/

media\products\1000576382/

media\products\1000576387/

media\products\1000576388/

media\products\1000576394/

media\products\1000576395/

media\products\1000576845/

media\products\1000577513/

media\products\1000577518/

media\products\1000577992/

media\products\1000577993/

media\products\1000577994/

media\products\1000578007/

media\products\1000578008/

media\products\1000578014/

media\products\1000578016/

media\products\1000578017/

media\products\1000578370/

media\products\1000579318/

media\products\1000579561/

media\products\1000579653/

media\products\1000579655/

media\products\1000579662/

media\products\1000579763/

media\products\1000579764/

media\products\1000579765/

media\products\1000579766/

media\products\1000579767/

media\products\1000579768/

media\products\1000579769/

media\products\1000579770/

media\products\1000579771/

media\products\1000579773/

media\products\1000579776/

media\products\1000580839/

media\products\1000581316/

media\products\1000581317/

media\products\1000582762/

media\products\1000582799/

media\products\1000582812/

media\products\1000582816/

media\products\1000582818/

media\products\1000582837/

media\products\1000582838/

media\products\1000582934/

media\products\1000584368/

media\products\1000584370/

media\products\1000584427/

media\products\1000584429/

media\products\1000584430/

media\products\1000584432/

media\products\1000584435/

media\products\1000584671/

media\products\1000584672/

media\products\1000584674/

media\products\1000585640/

media\products\1000588004/

media\products\1000588481/

media\products\1000589925/

media\products\1000589926/

media\products\1000589932/

media\products\1000592097/

media\products\1000592105/

media\products\1000592788/

media\products\1000592982/

media\products\1000592983/

media\products\1000593362/

media\products\1000593885/

media\products\1000593886/

media\products\1000593887/

media\products\1000593888/

media\products\1000593889/

media\products\1000596080/

media\products\1000596095/

orders/
  ğŸ“„ admin.py
  ğŸ“„ apps.py
  ğŸ“„ context_processors.py
  ğŸ“„ forms.py
  ğŸ“„ models.py
  ğŸ“„ tests.py
  ğŸ“„ urls.py
  ğŸ“„ views.py
  ğŸ“„ __init__.py

orders\migrations/
  ğŸ“„ 0001_initial.py
  ğŸ“„ __init__.py

orders\templates/

orders\templates\orders/
  ğŸ“„ cart.html
  ğŸ“„ order_form.html
  ğŸ“„ order_success.html

orders\templates\registration/
  ğŸ“„ login.html

pages/
  ğŸ“„ admin.py
  ğŸ“„ apps.py
  ğŸ“„ models.py
  ğŸ“„ tests.py
  ğŸ“„ urls.py
  ğŸ“„ views.py
  ğŸ“„ __init__.py

pages\migrations/
  ğŸ“„ __init__.py

pages\templates/
  ğŸ“„ base.html

pages\templates\pages/
  ğŸ“„ home.html
  ğŸ“„ test.html

project_backups/

project_backups\working_snapshot_20251110_195422/
  ğŸ“„ README.md

project_backups\working_snapshot_20251110_195422\catalog/
  ğŸ“„ urls.py
  ğŸ“„ views.py

project_backups\working_snapshot_20251110_195422\core/
  ğŸ“„ urls.py
  ğŸ“„ views.py

project_backups\working_snapshot_20251110_195422\templates/

project_backups\working_snapshot_20251110_195422\templates\includes/
  ğŸ“„ header.html

project_backups\working_snapshot_20251110_195422\templates\main/
  ğŸ“„ home.html

static/

static\css/

static\images/

static\js/

static\videos/

templates/
  ğŸ“„ base.html
  ğŸ“„ debug_ocs.html

templates\cart/
  ğŸ“„ detail.html

templates\catalog/
  ğŸ“„ catalog.html
  ğŸ“„ detail.html
  ğŸ“„ home.html
  ğŸ“„ list.html
  ğŸ“„ product_detail.html
  ğŸ“„ product_list.html

templates\includes/
  ğŸ“„ footer.html
  ğŸ“„ header.html

templates\main/
  ğŸ“„ home.html

templates\orders/
  ğŸ“„ create.html
  ğŸ“„ detail.html

templates\pages/
  ğŸ“„ about.html
  ğŸ“„ contacts.html


Ğ‘ĞĞ—Ğ Ğ”ĞĞĞĞ«Ğ¥:
  Product_count: 38
  Category_count: 502
  PartnerProduct_count: 40
  Product_fields: ['id', 'category', 'name', 'description', 'price', 'image']
  Category_fields: ['id', 'name', 'slug', 'parent', 'display', 'image', 'sort_order', 'ocs_category_code', 'category_type']


ĞĞĞ¡Ğ¢Ğ ĞĞ™ĞšĞ˜:
  DEBUG: True
  ALLOWED_HOSTS: ['localhost', '127.0.0.1']
  INSTALLED_APPS: ['catalog', 'cart', 'orders', 'accounts.apps.AccountsConfig', 'pages']
  DATABASES: ['default']
  TEMPLATES_DIRS: [WindowsPath('C:/Users/harmo/Desktop/project/mebel-shop/templates')]


Ğ¡ĞĞ”Ğ•Ğ Ğ–ĞĞĞ˜Ğ• ĞšĞ›Ğ®Ğ§Ğ•Ğ’Ğ«Ğ¥ Ğ¤ĞĞ™Ğ›ĞĞ’:

========================================
Ğ¤Ğ°Ğ¹Ğ» views
========================================
from django.shortcuts import render, get_object_or_404, redirect
from .utils import get_products_by_category_wrapper as get_products_by_category
from .utils import get_product_content_wrapper as get_product_content
from django.http import JsonResponse
from django.db.models import Q
from .models import Product, Category, PartnerProduct
import json
from django.shortcuts import render
from django.views.decorators.csrf import csrf_exempt
from django.core.paginator import Paginator
from django.utils.text import slugify
from django.views.decorators.csrf import csrf_exempt

def get_all_child_categories(category):
    """Ğ ĞµĞºÑƒÑ€ÑĞ¸Ğ²Ğ½Ğ¾ Ğ¿Ğ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ğ²ÑĞµ Ğ´Ğ¾Ñ‡ĞµÑ€Ğ½Ğ¸Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸"""
    children = list(category.children.all())
    for child in category.children.all():
        children.extend(get_all_child_categories(child))
    return children

def is_category_in_limited_structure(category, limited_main_category):
    """ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµÑ‚, Ğ¿Ñ€Ğ¸Ğ½Ğ°Ğ´Ğ»ĞµĞ¶Ğ¸Ñ‚ Ğ»Ğ¸ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ğ¾Ğ¹ ÑÑ‚Ñ€ÑƒĞºÑ‚ÑƒÑ€Ğµ"""
    if category == limited_main_category:
        return True
    
    # ĞŸÑ€Ğ¾Ğ²ĞµÑ€ÑĞµĞ¼ Ğ²ÑĞµÑ… Ñ€Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ĞµĞ¹ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
    current = category
    while current.parent:
        if current.parent == limited_main_category:
            return True
        current = current.parent
    
    return False

def catalog_view(request):
    category_slug = request.GET.get('category')
    brand_slugs = request.GET.getlist('brand')
    search_query = request.GET.get('q', '')
    min_price = request.GET.get('min_price')
    max_price = request.GET.get('max_price')

    # ĞĞ°Ñ…Ğ¾Ğ´Ğ¸Ğ¼ Ğ½Ğ°ÑˆÑƒ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½ÑƒÑ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½ÑƒÑ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ
    limited_main_category = Category.objects.filter(
        slug='bytovaya-tekhnika-i-elektronika',
        category_type='main'
    ).first()
    
    if limited_main_category:
        # ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµĞ¼ Ğ²ÑĞµ Ğ¿Ğ¾Ğ´ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
        all_limited_categories = get_all_child_categories(limited_main_category)
        all_limited_categories.append(limited_main_category)
        
        # Ğ¤Ğ¸Ğ»ÑŒÑ‚Ñ€ÑƒĞµĞ¼ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ñ‹ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¿Ğ¾ Ğ½Ğ°ÑˆĞ¸Ğ¼ ĞºĞ°Ñ‚...

========================================
Ğ¤Ğ°Ğ¹Ğ» URLs
========================================
from django.urls import path
from . import views
from django.views.decorators.csrf import csrf_exempt

app_name = 'catalog'

urlpatterns = [
    # Ğ“Ğ»Ğ°Ğ²Ğ½Ğ°Ñ ÑÑ‚Ñ€Ğ°Ğ½Ğ¸Ñ†Ğ° ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ° (Ñ‚ĞµÑ…Ğ½Ğ¸ĞºĞ° Ğ¸Ğ· OCS)
    path('', views.catalog_view, name='product_list'),
    
    # ĞÑÑ‚Ğ°Ğ»ÑŒĞ½Ñ‹Ğµ Ğ¼Ğ°Ñ€ÑˆÑ€ÑƒÑ‚Ñ‹ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ°
    path('catalog/', csrf_exempt(views.catalog_fixed), name='catalog'),
    path('test-fixed/', views.test_products_fixed, name='test_fixed'),
    path('simple/', views.catalog_list, name='simple_list'),
    path('catalog-view/', views.catalog_view, name='catalog_view'),
    path('product/<str:product_key>/', views.product_detail, name='product_detail'),
    path('add-to-cart/', views.add_to_cart, name='add_to_cart'),
    path('get-cart-count/', views.get_cart_count, name='get_cart_count'),
    path('category/<str:category_code>/', views.category_detail, name='category_detail'),
    path('catalog-by-category/<str:category_code>/', views.catalog_by_category, name='catalog_by_category'),
    path('debug-ocs/', views.debug_ocs, name='debug_ocs'),
]


========================================
ĞœĞ¾Ğ´ĞµĞ»Ğ¸
========================================
from django.db import models
from django.utils.text import slugify
import os

def product_image_path(instance, filename):
    """ĞŸÑƒÑ‚ÑŒ Ğ´Ğ»Ñ ÑĞ¾Ñ…Ñ€Ğ°Ğ½ĞµĞ½Ğ¸Ñ Ğ¸Ğ·Ğ¾Ğ±Ñ€Ğ°Ğ¶ĞµĞ½Ğ¸Ğ¹ Ñ‚Ğ¾Ğ²Ğ°Ñ€Ğ¾Ğ²"""
    return f'products/{instance.product.product_key}/{filename}'

class Category(models.Model):
    name = models.CharField(max_length=200, verbose_name="ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸")
    slug = models.SlugField(unique=True)
    parent = models.ForeignKey('self', on_delete=models.CASCADE, null=True, blank=True, related_name='children')
    display = models.BooleanField(default=True, verbose_name="ĞÑ‚Ğ¾Ğ±Ñ€Ğ°Ğ¶Ğ°Ñ‚ÑŒ Ğ² ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğµ")
    image = models.ImageField(upload_to='categories/', null=True, blank=True)
    sort_order = models.PositiveIntegerField(default=0, verbose_name="ĞŸĞ¾Ñ€ÑĞ´Ğ¾Ğº ÑĞ¾Ñ€Ñ‚Ğ¸Ñ€Ğ¾Ğ²ĞºĞ¸")
    
    # ĞĞ¾Ğ²Ñ‹Ğµ Ğ¿Ğ¾Ğ»Ñ Ğ´Ğ»Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ğ¸ Ñ OCS
    ocs_category_code = models.CharField("ĞšĞ¾Ğ´ Ğ² OCS", max_length=20, blank=True, null=True, unique=True)
    
    # ĞŸĞ¾Ğ»Ğµ Ğ´Ğ»Ñ Ğ¾Ğ¿Ñ€ĞµĞ´ĞµĞ»ĞµĞ½Ğ¸Ñ Ñ‚Ğ¸Ğ¿Ğ° ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸
    CATEGORY_TYPE_CHOICES = [
        ('main', 'ĞÑĞ½Ğ¾Ğ²Ğ½Ğ°Ñ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ'),
        ('sub', 'ĞŸĞ¾Ğ´ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ'),
        ('brand', 'ĞŸÑ€Ğ¾Ğ¸Ğ·Ğ²Ğ¾Ğ´Ğ¸Ñ‚ĞµĞ»ÑŒ'),
    ]
    category_type = models.CharField(
        "Ğ¢Ğ¸Ğ¿ ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸", 
        max_length=10, 
        choices=CATEGORY_TYPE_CHOICES, 
        default='main'
    )

    class Meta:
        verbose_name = "ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ñ"
        verbose_name_plural = "ĞšĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¸"
        ordering = ['sort_order']

    def __str__(self):
        return self.name
    
    def is_main_category(self):
        return self.category_type == 'main' and self.parent is None
    
    def is_subcategory(self):
        return self.category_type == 'sub' and self.parent is not None
    
    def is_brand(self):
        return self.category_type == 'brand'
    
    def get_limited_main_categories(self):
        """ĞŸĞ¾Ğ»ÑƒÑ‡Ğ°ĞµÑ‚ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ³Ñ€Ğ°Ğ½Ğ¸Ñ‡ĞµĞ½Ğ½Ñ‹Ğ¹ Ğ½Ğ°Ğ±Ğ¾Ñ€ Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ñ‹Ñ… ĞºĞ°Ñ‚ĞµĞ³Ğ¾Ñ€Ğ¸Ğ¹"""
        return Category.objects.filter(
            parent__isnull=True, 
            category_type='main',
            display=True,
            slug='bytovaya-tekhnika...

========================================
ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¹ĞºĞ¸
========================================
"""
Django settings for core project.

Generated by 'django-admin startproject' using Django 5.2.7.

For more information on this file, see
https://docs.djangoproject.com/en/5.2/topics/settings/

For the full list of settings and their values, see
https://docs.djangoproject.com/en/5.2/ref/settings/
"""

from pathlib import Path
import os
from dotenv import load_dotenv

# Ğ—Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ° Ğ¿ĞµÑ€ĞµĞ¼ĞµĞ½Ğ½Ñ‹Ñ… Ğ¾ĞºÑ€ÑƒĞ¶ĞµĞ½Ğ¸Ñ
load_dotenv()

# Build paths inside the project like this: BASE_DIR / 'subdir'.
BASE_DIR = Path(__file__).resolve().parent.parent

# Quick-start development settings - unsuitable for production
# See https://docs.djangoproject.com/en/5.2/howto/deployment/checklist/

# SECURITY WARNING: keep the secret key used in production secret!
SECRET_KEY = os.getenv('SECRET_KEY', 'django-insecure-fallback-key-for-dev-only')

# SECURITY WARNING: don't run with debug turned on in production!
DEBUG = os.getenv('DEBUG', 'True').lower() == 'true'

ALLOWED_HOSTS = os.getenv('ALLOWED_HOSTS', 'localhost,127.0.0.1,.ocs.ru,*').split(',')

# Application definition

INSTALLED_APPS = [
    'django.contrib.admin',
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'catalog',
    'cart',
    'orders',
    'accounts.apps.AccountsConfig',
    'pages',
]

MIDDLEWARE = [
    'django.middleware.security.SecurityMiddleware',
    'django.contrib.sessions.middleware.SessionMiddleware',
    'django.middleware.common.CommonMiddleware',
    'django.middleware.csrf.CsrfViewMiddleware',
    'django.contrib.auth.middleware.AuthenticationMiddleware',
    'django.contrib.messages.middleware.MessageMiddleware',
    'django.middleware.clickjacking.XFrameOptionsMiddleware',
]

ROOT_URLCONF = 'core.urls'

TEMPLATES = [
    {
        'BACKEND': 'django.template.backends.django.DjangoTemplates',
        'DIRS': [BASE_DIR / 'templates'],
        'APP_DIRS': True,
        'OPTIONS': {
            'context_proce...

========================================
Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ Ğ³Ğ»Ğ°Ğ²Ğ½Ğ¾Ğ¹
========================================
Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½

========================================
Ğ¨Ğ°Ğ±Ğ»Ğ¾Ğ½ ĞºĞ°Ñ‚Ğ°Ğ»Ğ¾Ğ³Ğ°
========================================
Ğ¤Ğ°Ğ¹Ğ» Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½
