from django.core.management.base import BaseCommand
from django.conf import settings
from pathlib import Path
from datetime import datetime

class Command(BaseCommand):
    help = '–°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–µ–∫—Ç–µ'

    def handle(self, *args, **options):
        self.create_progress_report()
        self.create_plans_file()
        
        self.stdout.write(
            self.style.SUCCESS('‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –æ—Ç—á–µ—Ç—ã —Å–æ–∑–¥–∞–Ω—ã!')
        )

    def create_progress_report(self):
        """–°–æ–∑–¥–∞–µ—Ç –ø—Ä–æ—Å—Ç–æ–π –æ—Ç—á–µ—Ç –æ –ø—Ä–æ–≥—Ä–µ—Å—Å–µ"""
        content = f"""# üìä –û–¢–ß–ï–¢ –û –ü–†–û–ï–ö–¢–ï - –ú–ï–ë–ï–õ–¨–ù–´–ô –ú–ê–ì–ê–ó–ò–ù

**–î–∞—Ç–∞:** {datetime.now().strftime('%d.%m.%Y %H:%M')}
**–°—Ç–∞—Ç—É—Å:** –ê–∫—Ç–∏–≤–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

## ‚úÖ –í–´–ü–û–õ–ù–ï–ù–û:
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Django –∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π
- –ì–ª–∞–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ —Å Bootstrap
- –ë–∞–∑–æ–≤—ã–π –∫–∞—Ç–∞–ª–æ–≥ —Ç–æ–≤–∞—Ä–æ–≤
- –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ—Ä–∑–∏–Ω—ã –ø–æ–∫—É–ø–æ–∫
- –°–∏—Å—Ç–µ–º–∞ –æ—Ç—á–µ—Ç–æ–≤

## üîÑ –í –†–ê–ë–û–¢–ï:
- –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ—Ä–∑–∏–Ω—ã
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –∫ OCS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## üìã –ü–õ–ê–ù–´:
- OCS API –¥–ª—è —Ç–µ—Ö–Ω–∏–∫–∏
- –ö–∞—Ç–∞–ª–æ–≥ –º–µ–±–µ–ª–∏ —Å 3D
- –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤

---
*–°–æ–∑–¥–∞–Ω–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏*
"""
        
        with open(Path(__file__).parent.parent.parent.parent / 'PROJECT_PROGRESS.md', 'w', encoding='utf-8') as f:
            f.write(content)

    def create_plans_file(self):
        """–°–æ–∑–¥–∞–µ—Ç —Ñ–∞–π–ª –ø–ª–∞–Ω–æ–≤"""
        content = """# üóìÔ∏è –ü–õ–ê–ù–´ –†–ê–ó–†–ê–ë–û–¢–ö–ò

## üîÑ –¢–ï–ö–£–©–ò–ï –ó–ê–î–ê–ß–ò
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ—Ä–∑–∏–Ω—É
2. –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
3. –ü–æ–¥–≥–æ—Ç–æ–≤–∏—Ç—å OCS –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é

## üöÄ –ë–£–î–£–©–ò–ï –§–ò–ß–ò
- OCS API —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- 3D –∫–∞—Ç–∞–ª–æ–≥ –º–µ–±–µ–ª–∏
- –£–º–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã
- –°–∏—Å—Ç–µ–º–∞ –∑–∞–∫–∞–∑–æ–≤

---
*–û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è –≤—Ä—É—á–Ω—É—é*
"""
        
        with open(Path(__file__).parent.parent.parent.parent / 'PROJECT_PLANS.md', 'w', encoding='utf-8') as f:
            f.write(content)